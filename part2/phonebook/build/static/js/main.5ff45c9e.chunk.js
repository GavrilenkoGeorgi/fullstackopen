(this["webpackJsonppart2-phonebook"]=this["webpackJsonppart2-phonebook"]||[]).push([[0],{15:function(e,t,n){e.exports=n(38)},20:function(e,t,n){},38:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(13),u=n.n(o),c=n(14),i=n(2),l=(n(20),function(e){var t=e.onChange;return a.a.createElement("div",null,"filter shown with: ",a.a.createElement("input",{onChange:t}))}),f=function(e){var t=e.name,n=e.number,r=e.onClick;return a.a.createElement("li",null,t," ",n,a.a.createElement("button",{type:"button",onClick:r},"Delete"))},m=function(e){var t=e.persons;return a.a.createElement("ul",null,t)},s=function(e){var t=e.onSubmit,n=e.name,r=e.number;return a.a.createElement("form",{onSubmit:t},a.a.createElement("div",null,"name: ",a.a.createElement("input",{onChange:n.onChange,value:n.value})),a.a.createElement("div",null,"number: ",a.a.createElement("input",{onChange:r.onChange,value:r.value})),a.a.createElement("div",null,a.a.createElement("button",{type:"submit"},"add")))},b=function(e){var t=e.message,n=e.type;return null===t?null:a.a.createElement("div",{className:n},t)},p=n(3),d=n.n(p),h="/api/persons",v=function(e){return d.a.post(h,e).then((function(e){return e.data}))},O=function(){return d.a.get(h).then((function(e){return e.data}))},w=function(e){return d.a.delete("".concat(h,"/").concat(e))},E=function(e,t){return d.a.put("".concat(h,"/").concat(e),t).then((function(e){return e.data}))};function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var j=function(){var e=Object(r.useState)([]),t=Object(i.a)(e,2),n=t[0],o=t[1],u=Object(r.useState)(""),p=Object(i.a)(u,2),d=p[0],h=p[1],j=Object(r.useState)(""),y=Object(i.a)(j,2),C=y[0],k=y[1],S=Object(r.useState)(""),P=Object(i.a)(S,2),T=P[0],D=P[1],J=Object(r.useState)(""),L=Object(i.a)(J,2),U=L[0],x=L[1],B=Object(r.useState)(""),F=Object(i.a)(B,2),I=F[0],N=F[1];Object(r.useEffect)((function(){O().then((function(e){return o(e)}))}),[]);var W=""===T?n:n.filter((function(e){return e.name.toLowerCase().startsWith(T)}));return a.a.createElement(a.a.Fragment,null,a.a.createElement(b,{message:U,type:I}),a.a.createElement("h1",null,"phonebook"),a.a.createElement(l,{value:T,onChange:function(e){D(e.target.value.toLowerCase())}}),a.a.createElement("h2",null,"add a new"),a.a.createElement(s,{onSubmit:function(e){e.preventDefault();if(n.some((function(e){return e.name===d}))){if(window.confirm("".concat(d," is already added to phonebook, replace the old number with the new one?"))){var t=n.find((function(e){return e.name===d})),r=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(n,!0).forEach((function(t){Object(c.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,{number:C});E(t.id,r).then((function(e){o(n.map((function(n){return n.id!==t.id?n:e}))),x("User '".concat(t.name,"' was updated.")),N("info"),setTimeout((function(){x(null)}),5e3),h(""),k("")})).catch((function(e){x(e.response.data.error),N("error"),setTimeout((function(){x(null)}),5e3)}))}}else{var a={name:d,number:C};v(a).then((function(e){o(n.concat(e)),x("User '".concat(a.name,"' was added.")),N("info"),setTimeout((function(){x(null)}),5e3),h(""),k("")})).catch((function(e){x(e.response.data.error),N("error"),setTimeout((function(){x(null)}),5e3)}))}},name:{value:d,onChange:function(e){h(e.target.value)}},number:{value:C,onChange:function(e){k(e.target.value)}}}),a.a.createElement("h2",null,"numbers"),a.a.createElement(m,{persons:W.map((function(e){return a.a.createElement(f,{key:e.id,name:e.name,number:e.number,onClick:function(){return t=e.id,void(window.confirm("Do you really want to delete user with id of: ".concat(t,"?"))&&w(t).then((function(e){o(n.filter((function(e){return e.id!==t}))),x("The person with '".concat(t,"' was succesfully deleted from the server.")),N("info"),setTimeout((function(){x(null)}),5e3)})).catch((function(e){x("The person with '".concat(t,"' was already deleted from the server.")),N("error"),setTimeout((function(){x(null)}),5e3)})));var t}})}))}))};u.a.render(a.a.createElement(j,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.5ff45c9e.chunk.js.map